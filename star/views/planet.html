<!DOCTYPE html>
<html ng-app="noobaa_app" xmlns:fb="http://ogp.me/ns/fb#" lang="en">
<head>
	<?# def.include('common_head.html') ?>
	<style>
		::selection {
			background: #d02020;
		}
		::-moz-selection {
			background: #d02020;
		}
		body {
			background-color: white;
			color: black;
			box-shadow: 0 0 1px 1px black inset;
			-moz-box-shadow: 0 0 1px 1px black inset;
			-webkit-box-shadow: 0 0 1px 1px black inset;
		}
		#logobar {
			-webkit-app-region: drag;
			cursor: move;
			background-color: #222222;
			padding: 3px 20px 3px 20px;
			margin-bottom: 30px;
			vertical-align: middle;
		}
		#logobar > a > img {
			height: 40px;
		}
		#logobar > a {
			/*-webkit-app-region: no-drag;*/
		}
		#logobar > button {
			-webkit-app-region: no-drag;
			margin-top: 8px;
		}
		#view {
			margin: 0 30px 0 30px;
			font-size: 16px;
			line-height: 24px;
		}
		#view small {
			font-size: 9pt;
		}
		#sketch {
			background-image: url('/public/images/sketch_skate.png');
			background-repeat: no-repeat;
			background-attachment: scroll;
			background-size: cover;
			background-position: 0 0;
			height: 0;
		}
	</style>
</head>

<body ng-cloak ng-controller="PlanetCtrl">

	<iframe id="auth_frame" hidden nwdisable nwfaketop></iframe>

	<div id="logobar">
		<a title="You can double click"
			ng-dblclick="toggle_fullscreen()">
			<img src="/public/images/noobaa_logo.png"></img>
		</a>
		<button class="btn btn-default btn-xs pull-right"
			ng-click="hide_win()"
			title="Minimize to tray">
			<span class="close">x</span>
		</button>
	</div>

	<div id="view" ng-include="current_view()"></div>

	<div id="sketch_place">
		<div id="sketch"></div>
	</div>

	<script type="text/ng-template" id="login_view">
		<div class="text-center">
			<p class="lead">
				<b>
					Hi, Co-sharing on this device is simply done 
					by logging in to your account:
				</b>
			</p>
			<a ng-show="!planet_user"
				ng-click="do_connect()" href="#"
				style="margin-left: 10px">
				<img src="/public/images/facebook_login_button_big.png"
					width="300px"></img>
			</a>
		</div>
	</script>

	<script type="text/ng-template" id="loading_view">
		<div class="text-center">
			<h3>
				<i class="icon-spinner icon-spin icon-large icon-fixed-width"></i>
				Connecting...
			</h3>
		</div>
	</script>

	<script type="text/ng-template" id="info_view">
		<div>
			<div class="list-group">
				<a class="list-group-item active">
					<h4>
						<i class="icon-check icon-white 
							icon-large icon-fixed-width"></i>
						<b>Connected</b>
					</h4>
				</a>
				<a class="list-group-item">
					<h4>
						<i class="icon-user icon-white 
							icon-large icon-fixed-width"></i>
						<b>{{planet_user.name}}</b>
					</h4>
				</a>
				<a href="#" class="list-group-item"
					ng-click="coshare_view(true)">
					<h4>
						<div ng-switch="!!planet_device && !!planet_device.coshare_space">
							<i class="icon-hdd icon-white 
								icon-large icon-fixed-width"></i>
							<b ng-switch-when="true">
								{{ human_size(planet_device.coshare_space) }}
							</b>
							<b ng-switch-when="false" class="text-danger">
								Start Co-Sharing
							</b>
						</div>
					</h4>
				</a>
			</div>
			<div class="text-center" >
				<ul class="list-unstyled">
					<li>
						<a href="#" ng-click="open_settings()">
							<small>Account Settings</small>
						</a>
					</li>
					<li>
						<a href="#" ng-click="do_logout()">
							<small>Not {{planet_user.first_name}}? Logout...</small>
						</a>
					</li>
					<li>
						<a href="#" ng-click="open_help()">
							<small>Help</small>
						</a>
					</li>
				</ul>
				<button class="btn btn-lg btn-primary"
					ng-click="open_noobaa()">
					Go to My Data
				</button>
			</div>
		</div>
	</script>

	<script type="text/ng-template" id="coshare_view">
		<div>
			<div class="text-center" style="padding-bottom: 20px">
				<button	ng-click="coshare_view(false)"
					class="btn btn-primary">
					Back
				</button>
			</div>
			<div class="list-group text-center">
				<a ng-repeat="plan in coshare_options" href="#"
					class="list-group-item"
					ng-click="coshare_options_select($index)"
					ng-class="coshare_options_class($index)">
					<h4 class="list-group-item-heading">{{plan.title}}</h4>
					<p class="list-group-item-text"><small>{{plan.details}}</small></p>
				</a>
			</div>
			<p>NooBaa makes storage capacity simple - 
				Give <b>1</b> Get <b>1</b> ! 
				This is co-sharing...</p>
			<p>Choose how much space to co-share from the options above.</p>
			<p>
				<small>
				Note: The allocation is made from the OS disk for now.
				Choosing the location will soon be supported.
				</small>
			</p>
		</div>
	</script>


	<?# def.include('common_scripts.html') ?>

	<script src="/vendor/async/lib/async.js" type="text/javascript"></script>
	<script src="/public/js/planet/planet_fs.js" type="text/javascript"></script>
	<script src="/public/js/planet/planet_ctrl.js" type="text/javascript"></script>

</body>
</html>