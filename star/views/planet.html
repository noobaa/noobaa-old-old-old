<!DOCTYPE html>
<html ng-app="noobaa_app" xmlns:fb="http://ogp.me/ns/fb#" lang="en">
<head>
	<?# def.include('common_head.html') ?>
	<style>
	</style>
</head>

<body ng-cloak ng-controller="PlanetCtrl" class="nonresp">

	<iframe id="auth_frame" hidden nwdisable nwfaketop></iframe>
	<input id="dir_upload_input"
		style="display: none"
		type="file"
		name="file"
		nwdirectory></input>
	<input id="file_upload_input"
		style="display: none"
		type="file"
		name="file"
		multiple="multiple"></input>

	<nav class="navbar navbar-inverse navbar-static-top"
		role="navigation">
		<div class="container">
			<div class="navbar-header">
				<a id="logo_link" class="navbar-brand" TODO-href="#" TODO-ng-click="open_noobaa()">
					<img src="/public/images/noobaa_logo.png"></img>
				</a>
			</div>
			<ul ng-show="planet_user && planet_device"
				class="nav navbar-nav navbar-left"
				style="margin-left: 30px">
				<li class="navbar-text" style="color: rgba(250,250,20,0.5)">
					<small>
						<i class="icon-check icon-large icon-fixed-width"></i>
						<b>Connected</b>
					</small>
				</li>
			</ul>
			<ul ng-show="planet_user" class="nav navbar-nav navbar-right">
				<li>
					<a href="#" ng-click="open_noobaa()" id="my_data_link">
						MY DATA
					</a>
				</li>
				<li ng-controller="UserCtrl" class="dropdown">
					<a class="dropdown-toggle"
						id="user_label" role="button"
						data-toggle="dropdown" href="#">
						<div class="text-ellipses" style="max-width: 200px">
							<span class="icon-user icon-white"></span>
							{{planet_user.name}}
						</div>
					</a>
					<ul class="dropdown-menu pull-right"
						role="menu"
						aria-labelledby="user_label">
						<li align="center">
							<img src="https://graph.facebook.com/{{planet_user.fbid}}/picture\"
								style="height: 40px"></img>
						</li>
						<li class="divider"></li>
						<li>
							<a>
								Quota: {{human_size(user_quota)}}
							</a>
						</li>
						<li>
							<a>
								Used: {{human_size(user_usage)}}
							</a>
						</li>
						<li class="divider"></li>
						<li>
							<a href="#" ng-click="open_settings()">
								<i class="icon-li icon-fixed-width icon-cog"></i>
								Account Settings
							</a>
						</li>
						<li>
							<a href="#" ng-click="open_help()">
								<i class="icon-li icon-fixed-width icon-h-sign"></i>
								Help (FAQ)
							</a>
						</li>
						<li >
							<a href="#" ng-click="do_logout()">
								<i class="icon-li icon-fixed-width icon-signout"></i>
								Logout
							</a>
						</li>
						<li>
							<a href="#" ng-click="quit_app()">
								<i class="icon-li icon-fixed-width icon-off"></i>
								Quit
							</a>
						</li>
					</ul>
				</li>
			</ul>
		</div>
	</nav>

	<div class="container">
		<div id="view" ng-include="current_view()"></div>
	</div>

	<script type="text/ng-template" id="login_view">
		<div class="text-center">
			<p class="lead">
				<b>
					Hi, Co-sharing on this device is simply done 
					by logging in to your account:
				</b>
			</p>
			<a ng-show="!planet_user"
				ng-click="do_connect()" href="#"
				style="margin-left: 10px">
				<img src="/public/images/facebook_login_button_big.png"
					width="300px"></img>
			</a>
		</div>
	</script>

	<script type="text/ng-template" id="loading_view">
		<div class="text-center">
			<h3>
				<i class="icon-spinner icon-spin icon-large icon-fixed-width"></i>
				Connecting...
			</h3>
		</div>
	</script>

	<script type="text/ng-template" id="info_view">
		<div id="info_view">
			<div class="text-center" class="row" style="margin-bottom: 20px;">
				<div class="btn-group" style="width: 100%">
					<button id="coshare_button" class="btn btn-danger"
						style="width: 50%; border: solid 1px rgba(0,0,0,0.4);"
						ng-click="coshare_view(true)"
						ng-disabled="!planet_device"
						title="Make Space">
						<i class="icon-rocket icon-large"></i>
					</button>
					<button id="upload_button" class="btn btn-success"
						style="width: 50%; border: solid 1px rgba(0,0,0,0.4);"
						ng-click="click_upload()"
						title="Upload"
						ng-disabled="!dir_selection.inode">
						<i class="icon-cloud-upload icon-large"></i>
					</button>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-6 text-center">
					<div style="border: solid 1px black; min-height: 200px">
						<br/>
						<h4 ng-hide="planet_device" class="lead">Updating...</h4>
						<div ng-show="planet_device">
							<h4>
								<i class="icon-rocket icon-2x icon-fixed-width"></i>
								{{ human_size(planet_device.coshare_space || 0) }}
							</h4>
							<h4>Currently</h4>
							<h4>Co-Shared</h4>
						</div>
					</div>
				</div>
				<div class="col-xs-6 text-center">
					<div style="border: solid 1px black; min-height: 200px">
						<br/>
						<h4><i class="icon-cloud-upload icon-2x icon-fixed-width"></i><h4>
						<h4>Drag &amp; Drop</h4>
						<h4>to start uploading!</h4>
						<br/>
						<div class="btn-group">
							<button id="choose_folder_button"
								class="btn btn-primary btn-sm"
								onclick="$('#dir_upload_input').trigger('click')">
								Choose Folder
							</button>
							<button id="choose_file_button"
								class="btn btn-primary btn-sm"
								onclick="$('#file_upload_input').trigger('click')">
								Choose Files
							</button>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<nb-upload-table/>
			</div>
		</div>
	</script>

	<script type="text/ng-template" id="coshare_view">
		<div>
			<div class="list-group text-center">
				<a ng-repeat="plan in coshare_options" href="#"
					class="list-group-item"
					ng-click="coshare_options_select($index)"
					ng-class="coshare_options_class($index)">
					<h4 class="list-group-item-heading">{{plan.title}}</h4>
					<p class="list-group-item-text"><small>{{plan.details}}</small></p>
				</a>
			</div>
			<div class="text-center" style="padding-bottom: 20px">
				<button	ng-click="coshare_view(false)"
					class="btn btn-default">
					Back
				</button>
				<button	ng-click="apply_coshare()"
					ng-disabled="coshare_selection < 0"
					class="btn btn-primary">
					Apply
				</button>
			</div>
			<p>Choose how much free capacity you&apos;d like to get in the cloud.</p>
			<p>NooBaa will allocate the same amount on your local hard disk (for storing internal encrypted data), and then your account quota will be updated accordingly.</p>
			<p>
				<small>
				Note: The allocation is made from the OS disk for now.
				Choosing different location will soon be supported.
				</small>
			</p>
		</div>
	</script>


	<?# def.include('common_scripts.html') ?>

	<script src="/vendor/blueimp-file-upload/js/vendor/jquery.ui.widget.js" type="text/javascript"></script>
	<script src="/vendor/blueimp-file-upload/js/jquery.iframe-transport.js" type="text/javascript"></script>
	<script src="/vendor/blueimp-file-upload/js/jquery.fileupload.js" type="text/javascript"></script>

	<script src="/vendor/async/lib/async.js" type="text/javascript"></script>
	<script src="/public/js/menu_ctrl.js" type="text/javascript"></script>
	<script src="/public/js/upload_srv.js" type="text/javascript"></script>
	<script src="/public/js/planet/planet_fs.js" type="text/javascript"></script>
	<script src="/public/js/planet/planet_ctrl.js" type="text/javascript"></script>

</body>
</html>