<!DOCTYPE html>
<html ng-app="noobaa_app" xmlns:fb="http://ogp.me/ns/fb#" lang="en">

<head>
	<?# def.include( 'common_head.html') ?>
		<style>
		.full-page {
			position: relative;
			padding-bottom: 80px;
			margin-bottom: 1px;
		}
		.poster {
			z-index: -10;
			overflow: hidden;
			position: absolute;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
		}
		.poster img {
			z-index: -10;
			position: absolute;
			right: 0;
			top: 0;
			left: auto;
			bottom: auto;
			min-width: 100%;
			min-height: 100%;
			max-width: 150%;
		}
		img.gopro {
			width: 350px;
			position: absolute;
			left: -30px;
			bottom: -17px;
		}
		@media all and (min-width: 767px) and (max-width: 970px) {
		}
		.W1 {
			font-size: 5em;
		}
		@media all and (max-width: 768px) {
			img.gopro {
				width: 250px;
				bottom: -14px;
			}
			.W1 {
				font-size: 3em;
			}
		}
		.scroll-anima {
			visibility: hidden;
		}
		#viewport {
			z-index: -10;
			position: absolute;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
			overflow: hidden;
			-webkit-perspective: 1000px;
			-moz-perspective: 1000px;
			-o-perspective: 1000px;
			perspective: 1000px;
		}
		#world {
			position: absolute;
			top: 50%;
			left: 50%;
			height: 512px;
			width: 512px;
			margin-left: -256px;
			margin-top: -256px;
			-webkit-transform-style: preserve-3d;
			-moz-transform-style: preserve-3d;
			-o-transform-style: preserve-3d;
			transform-style: preserve-3d;
		}
		.cloudBase {
			position: absolute;
			top: 256px;
			left: 256px;
			height: 20px;
			width: 20px;
			margin-left: -10px;
			margin-top: -10px;
			-webkit-transform-style: preserve-3d;
			-moz-transform-style: preserve-3d;
			-o-transform-style: preserve-3d;
			transform-style: preserve-3d;
		}
		.cloudLayer {
			position: absolute;
			left: 50%;
			top: 50%;
			width: 256px;
			height: 256px;
			margin-left: -128px;
			margin-top: -128px;
			-webkit-transition: opacity .5s ease-out;
			-moz-transition: opacity .5s ease-out;
			-o-transition: opacity .5s ease-out;
			transition: opacity .5s ease-out;
			opacity: 0.5;
			-webkit-transform-style: preserve-3d;
			-moz-transform-style: preserve-3d;
			-o-transform-style: preserve-3d;
			transform-style: preserve-3d;
		}
		</style>
</head>

<body ng-cloak ng-controller="WelcomeCtrl" Xclass="slideUp" Xstyle="visibility: hidden">

	<div>
		<?# def.facebook_init_body ?>
	</div>

	<div class="filling full-page" id="page0">
		<div class="Xcontainer" style="padding: 20px">
			<a href="/">
				<img src="/public/images/noobaa_logo.png" height="50px"></img>
				<small style="color: white">BETA</small>
			</a>
		</div>

		<div style="background-color: rgba(0,0,0,0.3)">
			<div class="container">
				<div class="col-sm-8">
					<h1 class="fntpaint W1 shades">
						A new era of cloud
					</h1>
					<div class="clearfix"></div>
					<p class="lead text-white shades" style="padding-top: 10px">
						Bringing the shared economy revolution to cloud storage.
					</p>
				</div>
				<div class="col-sm-4 text-right">
					<div style="padding: 20px 0">
						<iframe width="300" height="200" src="//www.youtube.com/embed/nz4AAfgs36g" frameborder="0" allowfullscreen></iframe>
					</div>
				</div>
			</div>
		</div>

		<div class="container stretchLeft text-right" style="padding-top: 30px">
			<div style="display: inline-block; background-color: hsla(0,0%,20%,0.4); border-radius: 10px; padding: 5px 10px 10px 10px" class="text-center">
				<h4 class="fntpaint shades" style="margin-bottom: 15px">
					Invite your friends. It's free.
				</h4>
				<div>
					<div class="fb-facepile" data-width="300" data-max-rows="1" data-colorscheme="light" data-size="small" data-show-count="true"></div>
				</div>
				<div style="margin-top: 10px">
					<a ng-click="nbUser.login_facebook()" Xhref="/auth/facebook/login/">
						<img src="/public/images/facebook_sign_in.png" class="img-rounded img-responsive center-block" style="width: 300px" />
					</a>
				</div>
				<h4 class="fntpaint shades">or</h4>
				<div style="margin-top: 10px">
					<a ng-click="nbUser.login_google()" Xhref="/auth/google/login/">
						<img src="/public/images/google_sign_in.png" class="img-rounded img-responsive center-block" style="width: 300px" />
					</a>
				</div>
			</div>
		</div>

		<div class="bottom-abs text-center" style="padding: 10px">
			<a href="#page1" class="scroller btn btn-default btn-transparent btn-lg">
				<i class="fa fa-caret-down fa-fw fa-lg"></i>
			</a>
		</div>
		<div class="poster text-center">
			<img src="/public/images/bg_wave.jpg" style="top: -20%; min-height: 120%" />
		</div>
		<!-- <img src="/public/images/gopro.png" class="gopro" /> -->
	</div>


	<div class="filling full-page" id="page1">
		<div style="height: 80px"></div>
		<div style="background-color: rgba(0,0,0,0.3)">
			<div class="container">
				<div class="starting-section">
					<h2 class="fntpaint W1 shades">Share videos</h2>
					<div class="clearfix"></div>
					<p class="lead text-white shades col-sm-6">
						Sharing videos with your friends has never been so easy. Connect using your Facebook or Google+ account and click on their faces!
					</p>
				</div>
			</div>
		</div>
		<div class="bottom-abs text-center" style="padding: 10px">
			<a href="#page2" class="scroller btn btn-default btn-transparent btn-lg">
				<i class="fa fa-caret-down fa-fw fa-lg"></i>
			</a>
		</div>
		<div class="poster text-center">
			<img src="/public/images/bg_bike.jpg" style="bottom: 0; top: auto" />
		</div>
	</div>


	<div class="filling full-page" id="page2">
		<div style="height: 80px"></div>
		<div style="background-color: rgba(0,0,0,0.2)">
			<div class="container">
				<div class="starting-section">
					<h2 class="fntpaint W1 shades">Watch videos</h2>
					<div class="clearfix"></div>
					<p class="lead text-white shades col-sm-4">
						Watching your own videos is always fun, but let’s face it – most of us are more interested in what our friends have been up to. NooBaa makes it easy and fun to watch videos shared by your friends.
					</p>
				</div>
			</div>
		</div>
		<div class="bottom-abs text-center" style="padding: 10px">
			<a href="#page3" class="scroller btn btn-default btn-transparent btn-lg">
				<i class="fa fa-caret-down fa-fw fa-lg"></i>
			</a>
		</div>
		<div class="poster text-center">
			<!-- <img src="/public/images/bg_rock.jpg" /> -->
			<img src="/public/images/bg_snow.jpg" />
		</div>
	</div>


	<div class="filling full-page" id="page3">
		<div style="height: 80px"></div>
		<div style="background-color: rgba(0,0,0,0.3)">
			<div class="container">
				<div class="starting-section">
					<h2 class="fntpaint W1 shades">Access anywhere</h2>
					<div class="clearfix"></div>
					<p class="lead text-white shades col-sm-6">
						Videos are accessible from any device, anywhere, anytime. Stream directly from the cloud.
					</p>
				</div>
			</div>
		</div>
		<div class="bottom-abs text-center" style="padding: 10px">
			<a href="#page4" class="scroller btn btn-default btn-transparent btn-lg">
				<i class="fa fa-caret-down fa-fw fa-lg"></i>
			</a>
		</div>
		<div class="poster text-center">
			<img src="/public/images/bg_skate.jpg" />
		</div>
	</div>


	<div class="filling full-page" id="page4">
		<div style="height: 80px"></div>
		<div style="background-color: rgba(0,0,0,0.3)">
			<div class="container">
				<div class="starting-section">
					<h2 class="fntpaint W1 shades">Protect your memories</h2>
					<div class="clearfix"></div>
					<p class="lead text-white shades col-sm-6">
						No need for an external hard drive. Keep a copy on the cloud for safekeeping and peace of mind.
					</p>
				</div>
			</div>
		</div>
		<div class="bottom-abs text-center" style="padding: 10px">
			<a href="#page5" class="scroller btn btn-default btn-transparent btn-lg">
				<i class="fa fa-caret-down fa-fw fa-lg"></i>
			</a>
		</div>
		<div class="poster text-center">
			<img src="/public/images/bg_fall.jpg" />
		</div>
	</div>


	<div class="filling full-page" id="page5">
		<div style="height: 80px"></div>
		<div class="container">
			<h1 class="fntpaint W1 shades">
				Sign In
			</h1>
			<div class="clearfix"></div>
			<p class="lead text-white shades">
				Your account is waiting for you.
			</p>
		</div>
		<div class="container stretchRight" style="padding-top: 30px">
			<div style="display: inline-block; background-color: hsla(0,0%,100%,0.5); border-radius: 10px; padding: 5px 10px 10px 10px" class="text-center">
				<h4 class="fntpaint shades" style="margin-bottom: 15px">
					Invite your friends. It's free.
				</h4>
				<div>
					<div class="fb-facepile" data-width="300" data-max-rows="1" data-colorscheme="light" data-size="small" data-show-count="true"></div>
				</div>
				<div style="margin-top: 10px">
					<a ng-click="nbUser.login_facebook()" Xhref="/auth/facebook/login/">
						<img src="/public/images/facebook_sign_in.png" class="img-rounded img-responsive center-block" style="width: 300px" />
					</a>
				</div>
				<h4 class="fntpaint shades">or</h4>
				<div style="margin-top: 10px">
					<a ng-click="nbUser.login_google()" Xhref="/auth/google/login/">
						<img src="/public/images/google_sign_in.png" class="img-rounded img-responsive center-block" style="width: 300px" />
					</a>
				</div>
			</div>
		</div>
		<div class="bottom-abs text-center" style="padding: 10px">
			<div class="text-center" style="padding: 10px">
				<a href="https://www.facebook.com/NoobaaTeam" target="_blank" class="btn btn-link btn-sm" style="text-decoration: none">
					<span class="fa-stack fa-2x">
						<i class="fa fa-circle fa-stack-2x" style="color: hsl(0,0%,20%)"></i>
						<i class="fa fa-facebook fa-stack-1x" style="color: hsl(222, 37%, 47%)"></i>
					</span>
				</a>
				<a href="https://twitter.com/TheNooBaa" target="_blank" class="btn btn-link btn-sm" style="text-decoration: none">
					<span class="fa-stack fa-2x">
						<i class="fa fa-circle fa-stack-2x" style="color: hsl(0,0%,20%)"></i>
						<i class="fa fa-twitter fa-stack-1x" style="color: hsl(212, 100%, 63%)"></i>
					</span>
				</a>
				<a href="https://www.google.com/+Noobaa" target="_blank" class="btn btn-link btn-sm" style="text-decoration: none">
					<span class="fa-stack fa-2x">
						<i class="fa fa-circle fa-stack-2x" style="color: hsl(0,0%,20%)"></i>
						<i class="fa fa-google-plus fa-stack-1x" style="color: hsl(7, 64%, 52%)"></i>
					</span>
				</a>
				<a href="https://www.youtube.com/user/TheNoobaa" target="_blank" class="btn btn-link btn-sm" style="text-decoration: none">
					<span class="fa-stack fa-2x">
						<i class="fa fa-circle fa-stack-2x" style="color: hsl(0,0%,20%)"></i>
						<i class="fa fa-youtube fa-stack-1x" style="color: hsl(358, 79%, 45%)"></i>
					</span>
				</a>
			</div>
			<div>
				<a href="https://mixpanel.com/f/partner" target="_blank" class="btn btn-link btn-sm" style="text-decoration: none; position: absolute; bottom: 5px; right: 0">
					<img src="//cdn.mxpnl.com/site_media/images/partner/badge_blue.png" alt="Mobile Analytics" />
				</a>
			</div>
			<a href="#page0" class="scroller btn btn-default btn-transparent btn-lg">
				top
			</a>
		</div>
		<div id="viewport">
			<div id="world"></div>
		</div>
	</div>

	<div>
		<?# def.include( 'common_scripts.html') ?>
	</div>

	<script src="/public/js/nb_user.js" type="text/javascript"></script>

	<script type="text/javascript">
	(function() {
		'use strict';

		var noobaa_app = angular.module('noobaa_app');

		noobaa_app.controller('WelcomeCtrl', [
			'$scope', '$location', '$anchorScroll', '$timeout', '$interval', 'nbUser', 'nbUtil',

			function($scope, $location, $anchorScroll, $timeout, $interval, nbUser, nbUtil) {
				$scope.nbUser = nbUser;
				$scope.need_chrome_ref = !bowser.chrome;

				mixpanel.track('welcome.load');
				nbUtil.track_event('welcome.load');

				// $anchorScroll();
				$scope.scroll = function(hash) {
					console.log('SCROLL', hash);
					$location.hash(hash);
					$anchorScroll();
				};

				// do smooth scrolling to anchors with href
				var html_body = $('body');
				$('.scroller').click(function() {
					var href = $.attr(this, 'href');
					console.log('SCROLL', href);
					html_body.animate({
						scrollTop: $(href).offset().top
					}, 500, function() {
						// window.location.hash = href;
					});
					return false;
				});

				/*
				$(window).scroll(function() {
					$('.scroll-anima').each(function() {
						var imagePos = $(this).offset().top;
						var topOfWindow = $(window).scrollTop();
						if (imagePos < topOfWindow + 400) {
							$(this).addClass("hatch");
						}
					});
				});*/

				// $('body').children().hide().fadeIn(2000);

				function clouds() {
					// Defining our variables
					// world and viewport are DOM elements,
					// worldXAngle and worldYAngle are floats that hold the world rotations,
					// d is an int that defines the distance of the world from the camera 
					var world = document.getElementById('world'),
						viewport = document.getElementById('viewport'),
						worldXAngle = 0,
						worldYAngle = 0,
						d = 0;
					// objects is an array of cloud bases
					// layers is an array of cloud layers
					var objects = [],
						layers = [];

					// Event listener to transform mouse position into angles 
					// from -180 to 180 degress, both vertically and horizontally
					window.addEventListener('mousemove', function(e) {
						worldYAngle = -(.5 - (e.clientX / window.innerWidth)) * 180;
						worldXAngle = (.5 - (e.clientY / window.innerHeight)) * 180;
						updateView();
					});

					generate();
					requestAnimationFrame(update);

					function random_range(from, to) {
						return from + (Math.random() * (to - from));
					}

					// Changes the transform property of world to be
					// translated in the Z axis by d pixels,
					// rotated in the X axis by worldXAngle degrees and
					// rotated in the Y axis by worldYAngle degrees.

					function updateView() {
						var t = 'translateZ( ' + d + 'px ) ' +
							'rotateX( ' + worldXAngle + 'deg ) ' +
							'rotateY( ' + worldYAngle + 'deg )';
						world.style.transform = t;
						world.style['-webkit-transform'] = t;
					}

					// Iterate layers[], update the rotation and apply the
					// inverse transformation currently applied to the world.
					// Notice the order in which rotations are applied.

					function update() {             
						for (var j = 0; j < layers.length; j++) {
							var layer = layers[j];
							layer.data.a += layer.data.speed;
							var t = 'translateX( ' + layer.data.x + 'px ) ' +
								'translateY( ' + layer.data.y + 'px ) ' +
								'translateZ( ' + layer.data.z + 'px ) ' +
								'rotateY( ' + (-worldYAngle) + 'deg ) ' +
								'rotateX( ' + (-worldXAngle) + 'deg ) ' +
								'rotateZ( ' + layer.data.a + 'deg ) ' +
								'scale( ' + layer.data.s + ' )';
							layer.style.transform = t;
							layer.style['-webkit-transform'] = t;
						}
						requestAnimationFrame(update);
					}

					// Creates a single cloud base: a div in world
					// that is translated randomly into world space.
					// Each axis goes from -256 to 256 pixels.

					function createCloud() {
						var l = 150;
						var cloud = document.createElement('div' );
						cloud.className = 'cloudBase';
						var t = 'translateX( ' + random_range(-l, l) + 'px ) ' +
							'translateY( ' + random_range(-l, l) + 'px ) ' +
							'translateZ( ' + random_range(-l, l) + 'px )';
						// cloud.style.backgroundColor = 'hsla(180, 100%, 50%, 1)';
						cloud.style.transform = t;
						cloud.style['-webkit-transform'] = t;
						world.appendChild(cloud);
						for (var j = 0; j < 10; j++) {
							var layer = document.createElement('img');
							layer.src = '/public/images/cloud.png';
							// layer.style.backgroundColor = 'hsla(180, 100%, 50%, 0.1)';
							layer.className = 'cloudLayer';
							layer.data = {
								x: random_range(-l, l),
								y: random_range(-l, l),
								z: random_range(-l, l),
								a: random_range(-180, 180),
								s: random_range(0.7, 1.3),
								speed: random_range(0.04, 0.07)
							};
							layers.push(layer);
							cloud.appendChild(layer);
						}
						return cloud;
					}

					// Clears the DOM of previous clouds bases 
					// and generates a new set of cloud bases

					function generate() {
						objects = [];
						layers = [];
						if (world.hasChildNodes()) {
							while (world.childNodes.length >= 1) {
								world.removeChild(world.firstChild);
							}
						}
						for (var j = 0; j < 5; j++) {
							objects.push(createCloud());
						}
					}

				}
				clouds();
			}
		]);
	})();
	</script>

</body>

</html>
