<div class="feeder">
	<div class="container">

		<div class="text-center">
			<span>Friend's stuff shared with me</span>
			<button class="btn btn-link" ng-click="refresh_feeds()" title="Click to refresh" rel="tooltip">
				<i class="fa fa-refresh {{refreshing_feeds && 'fa-spin' || ''}} fa-fw"></i>
			</button>
		</div>

		<div class="feeds_container center-block">

			<div ng-if="feeds && !feeds.length" class="text-center" style="padding: 20px">
				<iframe width="400" height="225" style="max-width: 100%" src="//www.youtube.com/embed/9KeVa3IOn78?rel=0" frameborder="0" allowfullscreen></iframe>
				<div style="padding-top: 20px">
					<a class="btn btn-link btn-lg" style="padding: 5px" href="/home/friends/">
						<i class="fa fa-users fa-lg fa-fw"></i>
						<span>Invite Your Friends</span>
					</a>
				</div>
			</div>

			<div ng-repeat="feed in feeds | filter:{content_kind: filter_content_kind} | limitTo:feeds_limit track by $index" ng-controller="FeedCtrl" class="feed_item">

				<div class="clearfix">
					<div nb-media="current_item()" media-events="media_events" show-content="false"></div>
				</div>

				<div>
					<div class="clearfix" style="padding: 10px 10px 10px 0">
						<div class="pull-right">
							<a class="btn btn-danger btn-hover-only {{feed.done_keep && 'text-danger'}}" ng-click="keep_feed()" ng-disabled="feed.running_keep || feed.done_keep">
								<i ng-if="feed.done_keep" class="fa fa-check"></i> 
								<span ng-if="feed.running_keep">
									<i class="fa fa-spin fa-spinner"></i>
								</span>
								keep
							</a>
							<a class="btn btn-warning btn-hover-only" ng-click="keep_and_share_feed()">
								share
							</a>
						</div>
						<div style="overflow: hidden">
							<div class="text-ellipses">
								<a class="btn btn-link" ng-click="open_feed_inode(feed)">
									<i class="fa fa-{{feed.isdir && 'folder-open' || 'file-o'}} fa-fw fa-lg"></i>
									{{feed.name}}
								</a>
							</div>
						</div>
						<div ng-show="feed.isdir" class="text-ellipses">
							<a class="btn btn-link" style="padding-top: 0" ng-disabled="index<=0" ng-click="prev_index()">
								<i class="fa fa-arrow-circle-o-left fa-lg"></i>
							</a>
							<span class="text-muted">{{index+1}} / {{feed.entries.length}}</span>
							<a class="btn btn-link" style="padding-top: 0" ng-disabled="index+1>=feed.entries.length" ng-click="next_index()">
								<i class="fa fa-arrow-circle-o-right fa-lg"></i>
							</a>
							{{current_item().name}}
						</div>
					</div>

					<div>
						<div ng-repeat="feed_inode in feed.feed_group track by $index" style="padding: 7px; border-top: 1px solid hsl(0,0%,20%)" class="clearfix">
							<img class="img-rounded pull-left" ng-src="{{nbUser.user_pic_url(feed_inode.owner)}}" style="width: 30px; margin-right: 5px" />
							<div style="overflow: hidden">
								<div class="text-primary"><small>{{feed_inode.owner.name}}</small></div>
								<div style="padding-top: 8px">
									<div ng-repeat="msg in feed_inode.messages" class="clearfix">
										<img class="img-rounded pull-left" ng-src="{{nbUser.user_pic_url(msg.user)}}" style="width: 30px; margin-right: 5px" />
										<div style="overflow: hidden">
											<div class="text-primary"><small>{{msg.user.name}}</small></div>
											<div style="padding-bottom: 8px"><small>{{msg.text}}</small></div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>

			<div class="text-center" ng-show="feeds_limit < feeds.length">
				<button class="btn btn-danger" ng-click="more_feeds()">
					Load more...
				</button>
			</div>

		</div>

	</div>
</div>
