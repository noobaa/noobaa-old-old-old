<div class="club-list panel" nb-panel-hfill>

    <div class="panel-heading navbar navbar-default">
        <div>
            <a class="btn btn-link pull-right" ng-click="nbClub.poll_clubs()">
                <i class="fa fa-fw fa-2x fa-repeat {{nbClub.poll_in_progress && 'fa-spin' || ''}}"></i>
            </a>
            <a class="btn btn-success navbar-btn pull-right" href="club/new">
                NEW CLUB
            </a>
            <div class="navbar-text">
                <i class="fa fa-cube fa-lg fa-fw text-muted" style="margin-left: 10px; margin-right: 15px"></i>Clubs
            </div>
        </div>
    </div>

    <div class="panel-body">
        <div>
            <div ng-repeat="club in nbClub.clubs_arr track by $index">
                <a ng-href="club/{{club._id}}" ng-style="club.style" style="display: block; padding: 20px" class="bgnoise2">
                    <div class="text-center club-title" style="height: 40vh; vertical-align: middle">
                        <img style="width: 0; height: 100%" />{{club.title}}
                    </div>
                    <div>
                        <div class="pull-right" style="margin-left: 20px">
                            <span ng-show="club.new_msgs">
                                <i class="fa fa-bell fa-fw fa-lg"></i>
                                {{club.new_msgs}} &nbsp;
                            </span>
                            <span ng-show="club.msgs.length">
                                <i class="fa fa-comment fa-fw fa-lg"></i>
                                {{club.msgs.length}}
                            </span>
                        </div>
                        <div class="text-ellipses" ng-if="club.msgs.length">
                            <span ng-if="club.msgs[0].user==nbUser.user.id">me:</span>
                            <span ng-if="club.msgs[0].user!=nbUser.user.id" style="color: hsl({{club.msgs[0].user_info.color}}, 70%, 55%)">
                                {{club.msgs[0].user_info.first_name}}:
                            </span>
                            &nbsp;
                            <span class="text-muted">{{club.msgs[0].text}}</span>
                            <span class="text-muted" ng-if="club.msgs[0].inode">
                                <i class="fa fa-{{nbUtil.icon_by_kind(club.msgs[0].inode.content_kind)}} fa-fw"></i>
                                {{club.msgs[0].inode.name}}
                            </span>
                        </div>
                    </div>
                </a>
                <hr/>
            </div>
        </div>
    </div>

</div>
