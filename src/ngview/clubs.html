<div class="club-list panel" nb-panel-hfill>

    <div class="panel-heading navbar navbar-default">
        <div>
            <a class="btn btn-link pull-right" ng-click="nbClub.poll_clubs()">
                <i class="fa fa-fw fa-2x fa-repeat {{nbClub.poll_in_progress && 'fa-spin' || ''}}"></i>
            </a>
            <a class="btn btn-success navbar-btn pull-right" href="club/new">
                NEW CLUB
            </a>
            <div class="navbar-text">
                <i class="fa fa-cube fa-lg fa-fw text-muted" style="margin-left: 10px; margin-right: 15px"></i>Clubs
            </div>
        </div>
    </div>

    <div class="panel-body">
        <div ng-repeat="club in nbClub.clubs_arr track by $index">
            <a class="btn-line" ng-href="club/{{club._id}}">
                <img class="pull-left user-image-lg" ng-src="{{club.logo}}" />
                <div class="pull-right club-num-msgs" ng-show="club.new_msgs">
                    {{club.new_msgs}} new
                </div>
                <div class="hflow" style="padding: 0 20px">
                    <div class="text-ellipses club-title">{{club.title}}</div>
                    <div style="padding-top: 5px">
                        <div class="text-ellipses" ng-if="club.msgs.length">
                            <span ng-if="club.msgs[0].user==nbUser.user.id">me:</span>
                            <span ng-if="club.msgs[0].user!=nbUser.user.id" style="color: hsl({{club.msgs[0].user_info.color}}, 70%, 55%)">
                                {{club.msgs[0].user_info.first_name}}:
                            </span>
                            &nbsp;
                            <span class="text-muted">{{club.msgs[0].text}}</span>
                            <span class="text-muted" ng-if="club.msgs[0].inode">
                                <i class="fa fa-{{nbUtil.icon_by_kind(club.msgs[0].inode.content_kind)}} fa-fw"></i>
                                {{club.msgs[0].inode.name}}
                            </span>
                        </div>
                    </div>
                </div>
            </a>
        </div>

    </div>

</div>
